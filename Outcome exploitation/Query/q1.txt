PREFIX iri: <http://knowdive.disi.unitn.it/etype#>
PREFIX omgeo: <http://www.ontotext.com/owlim/geo#>
CONSTRUCT{	?Establishment a iri:Establishment_GID-43815 ;
                iri:has_Location_GID-779_Type-779 ?Location;
                iri:has_name_GID-2_Type-43815 ?name;      
                iri:has_amenity_GID-2973_Type-43815 ?amenity;
                iri:has_housenumber_GID-34489_Type-43815 ?housenumber;
                iri:has_street_GID-24034_Type-43815 ?street;
                iri:has_postcode_GID-34110_Type-43815 ?postcode;
                iri:has_city_GID-45969_Type-43815 ?city.
    
   ?Establishment a iri:Bar_GID-14950; 
                  iri:has_WheelChair_GID-25446_Type-14950?wheelchair;
          iri:has_Smoking_GID-23491_Type-14950?smoking.
                       
?Location  a iri:Location_GID-779;
        	iri:has_lattitude_GID-46264_Type-779 ?latitude;
          iri:has_longitude_GID-46270_Type-779 ?longitude.
}
WHERE{	
    { ?Establishment a iri:Establishment_GID-43815}
    UNION
    {?Establishment a iri:Bar_GID-14950}
	   ?Establishment iri:has_Location_GID-779_Type-779 ?Location;
                iri:has_name_GID-2_Type-43815 ?name;      
                iri:has_amenity_GID-2973_Type-43815 ?amenity;
                iri:has_housenumber_GID-34489_Type-43815 ?housenumber;
                iri:has_street_GID-24034_Type-43815 ?street;
                iri:has_postcode_GID-34110_Type-43815 ?postcode;
                iri:has_city_GID-45969_Type-43815 ?city.
   					 filter(?amenity = "Bar")
                       filter(?city="Trento")
    OPTIONAL{
         ?Establishment iri:has_WheelChair_GID-25446_Type-14950?wheelchair;
          iri:has_Smoking_GID-23491_Type-14950?smoking.
             filter(?wheelchair = "yes")                            
    }                       
?Location iri:has_lattitude_GID-46264_Type-779 ?latitude;
          iri:has_longitude_GID-46270_Type-779 ?longitude.
     BIND (omgeo:distance(46.0671931, 11.1212042, ?latitude, ?longitude) AS ?distance)
             # Maximum allowed distance in Km 
             FILTER (?distance < 5)

}
LIMIT 3
PREFIX iri: <http://knowdive.disi.unitn.it/etype#>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>
Construct {
    ?Establishment a iri:Establishment_GID-43815;
   				iri:has_Location_GID-779_Type-779 ?Location;
                iri:has_name_GID-2_Type-43815 ?name;      
                iri:has_amenity_GID-2973_Type-43815 ?amenity;
                iri:has_housenumber_GID-34489_Type-43815 ?housenumber;
                iri:has_street_GID-24034_Type-43815 ?street;
                iri:has_postcode_GID-34110_Type-43815 ?postcode;
                iri:has_city_GID-45969_Type-43815 ?city.
    				
    ?Establishment  a iri:Cafe_GID-15804;
                 iri:has_Location_GID-779_Type-779 ?Location;               
                 iri:has_OutdoorSeating_GID-46525_Type-15804?OutdoorSeating;     
                 iri:has_housenumber_GID-34489_Type-43815 ?housenumber;
                 iri:has_street_GID-24034_Type-43815 ?street;
                 iri:has_postcode_GID-34110_Type-43815 ?postcode;
                 iri:has_city_GID-45969_Type-43815 ?city.                                      
    					 
 ?Location  a iri:Location_GID-779;
            	iri:has_lattitude_GID-46264_Type-779 ?latitude;
                iri:has_longitude_GID-46270_Type-779 ?longitude.   
}                         
               

Where
{ 
    {?Establishment a iri:Establishment_GID-43815}
    UNION
    {?Establishment a iri:Cafe_GID-15804}
    
   ?Establishment   iri:has_Location_GID-779_Type-779 ?Location;
                iri:has_name_GID-2_Type-43815 ?name;      
                iri:has_amenity_GID-2973_Type-43815 ?amenity;
                iri:has_housenumber_GID-34489_Type-43815 ?housenumber;
                iri:has_street_GID-24034_Type-43815 ?street;
                iri:has_postcode_GID-34110_Type-43815 ?postcode;
                iri:has_city_GID-45969_Type-43815 ?city.
    				filter(?amenity = "cafe")
   					filter(?city ="Trento")
    
    OPTIONAL {
        ?Establishment iri:has_OutdoorSeating_GID-46525_Type-15804?OutdoorSeating;
       		filter(?OutdoorSeating = "yes")                                           
    }
  					 
 ?Location iri:has_lattitude_GID-46264_Type-779 ?latitude;
          iri:has_longitude_GID-46270_Type-779 ?longitude.   
                                                 
} ORDER BY  DESC(?OutdoorSeating)
limit 3